<VisualizarDespesasView>:

    BoxLayout:
        orientation: "vertical"
        padding: [20, 15, 20, 15]
        spacing: 10

        Label:
            text: "Gerenciar Despesas"
            size_hint_y: None
            height: 100
            font_size: "40sp"
            bold: True
            color: (1, 1, 1, 1)
            halign: 'center'
            valign: 'middle'
            canvas.before:
                Color:
                    rgba: 67/255, 194/255, 77/255, 1
                RoundedRectangle:
                    size: self.size
                    pos: self.pos
                    radius: [0, 0, 15, 15]

        BoxLayout:
            orientation: "vertical"
            padding: [20, 20, 20, 20]
            spacing: 10
            size_hint_x: None
            width: 800
            pos_hint: {"center_x": 0.5}
            canvas.before:
                Color:
                    rgba: 245/255, 247/255, 245/255, 1
                RoundedRectangle:
                    size: self.size
                    pos: self.pos
                    radius: [15, 15, 15, 15]

            TabbedPanel:
                id: panel
                do_default_tab: False

                TabbedPanelItem:
                    id: buscar
                    background_color: (1, 1, 1, 1)
                    text: "Buscar"

                    BoxLayout:
                        orientation: "vertical"
                        padding: [10, 10, 10, 10]
                        spacing: 10

                        ScrollView:
                            BoxLayout:
                                orientation: "vertical"
                                size_hint_y: None
                                height: self.minimum_height
                                spacing: 10
                                padding: [0, 20, 0, 0]

                                BoxLayout:
                                    orientation: "horizontal"
                                    size_hint_y: None
                                    height: 40
                                    spacing: 10
                                    padding: [0, 15, 0, 15]

                                    Label:
                                        text: "Buscar por descrição: "
                                        size_hint_x: None
                                        width: 200
                                        color: (0, 0, 0, 1)

                                    TextInput:
                                        id: descricao_buscar
                                        multiline: False
                                        size_hint_y: None
                                        height: 40
                                        hint_text: "Digite a descrição"
                                        background_color: (1, 1, 1, 1)
                                        on_text: root.buscar_por_descricao()

                                    Button:
                                        text: "Buscar"
                                        size_hint_x: None
                                        size_hint_y: None
                                        height: 40
                                        width: 100
                                        background_color: 0.26, 0.7, 0.3, 1
                                        color: (1, 1, 1, 1)
                                        
                                BoxLayout:
                                    id: despesas_list
                                    orientation: "vertical"
                                    size_hint_y: None
                                    height: self.minimum_height
                                    spacing: 10

                TabbedPanelItem:
                    id: cadastrar
                    text: "Cadastrar"

                    BoxLayout:
                        orientation: "vertical"
                        padding: [10, 10, 10, 10]
                        spacing: 10

                        BoxLayout:
                            orientation: "horizontal"
                            size_hint_y: None
                            height: 200
                            spacing: 10
                            padding: [0, 10, 0, 10]

                            BoxLayout:
                                orientation: "vertical"
                                size_hint_x: None
                                width: 500
                                spacing: 10

                                BoxLayout:
                                    orientation: "horizontal"
                                    spacing: 10

                                    Label:
                                        text: "Descrição: "
                                        size_hint_x: None
                                        width: 100
                                        color: (0, 0, 0, 1)

                                    TextInput:
                                        id: descricao
                                        multiline: False
                                        hint_text: "Digite a descrição"
                                        background_color: (1, 1, 1, 1)

                                BoxLayout:
                                    orientation: "horizontal"
                                    spacing: 10

                                    Label:
                                        text: "Valor: "
                                        size_hint_x: None
                                        width: 100
                                        color: (0, 0, 0, 1)

                                    TextInput:
                                        id: valor
                                        multiline: False
                                        hint_text: "Digite o valor"
                                        background_color: (1, 1, 1, 1)

                                BoxLayout:
                                    orientation: "horizontal"
                                    spacing: 10

                                    Label:
                                        text: "Usuário: "
                                        size_hint_x: None
                                        width: 100
                                        color: (0, 0, 0, 1)

                                    TextInput:
                                        id: usuario
                                        multiline: False
                                        hint_text: "Digite o usuário"
                                        background_color: (1, 1, 1, 1)

                                BoxLayout:
                                    orientation: "horizontal"
                                    spacing: 10

                                    Label:
                                        text: "Mês Vencimento: "
                                        size_hint_x: None
                                        width: 100
                                        color: (0, 0, 0, 1)

                                    TextInput:
                                        id: mes_vencimento
                                        multiline: False
                                        hint_text: "Digite o mês"
                                        background_color: (1, 1, 1, 1)

                                BoxLayout:
                                    orientation: "horizontal"
                                    spacing: 10

                                    Label:
                                        text: "Ano vencimento: "
                                        size_hint_x: None
                                        width: 100
                                        color: (0, 0, 0, 1)

                                    TextInput:
                                        id: ano_vencimento
                                        multiline: False
                                        hint_text: "Digite o ano"
                                        background_color: (1, 1, 1, 1)

                            Label:
                                size_hint_x: None
                                width: 145

                        BoxLayout:
                            size_hint_x: None
                            width: 500
                            spacing: 10

                            Widget:

                            Button:
                                text: "Cadastrar"
                                size_hint_x: None
                                width: 120
                                height: 40
                                background_color: 0.26, 0.7, 0.3, 1
                                color: 1, 1, 1, 1
                                on_release: root.cadastrar_despesa()

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: 40
            padding: [0, 10, 0, 10]

            Widget:

            Button:
                text: "Voltar"
                size_hint_x: None
                size_hint_y: None
                width: 100
                height: 40
                background_color: 0.7, 0.2, 0.2, 1
                color: 1, 1, 1, 1
                on_release: root.voltar()

<Despesa>:
    orientation: "horizontal"
    size_hint_y: None
    height: 110
    padding: [0, 10, 10, 10]

    canvas.before:
        Color:
            rgba: 235/255, 235/255, 235/255, 1
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [10, 10, 10, 10]

    BoxLayout:
        orientation: "vertical"
        size_hint_x: None
        width: 500
        spacing: 5

        Label:
            color: (0, 0, 0, 1)
            text_size: self.size
            halign: "left"
            valign: "middle"
            text: "Descrição: " + root.descricao

        Label:
            color: (0, 0, 0, 1)
            text_size: self.size
            halign: "left"
            valign: "middle"
            text: 'Valor: {:.2f}'.format(root.valor)

        Label:
            color: (0, 0, 0, 1)
            text_size: self.size
            halign: "left"
            valign: "middle"
            text: "Usuário: " + root.usuario

        Label:
            color: (0, 0, 0, 1)
            text_size: self.size
            halign: "left"
            valign: "middle"
            text: "Status: " + root.status

        Label: 
            color: (0, 0, 0, 1)
            text_size: self.size
            halign: "left"
            valign: "middle"
            text: 'Vencimento: {:.0f}/{:.0f}'.format(root.mes_vencimento, root.ano_vencimento)

    Label:
        size_hint_x: None
        width: 150

    Button:
        text: "Apagar"
        disabled: root.edit
        size_hint_x: None
        width: 80
        height: 40
        background_color: 0.7, 0.2, 0.2, 1
        color: 1, 1, 1, 1
        on_release: root.apagar_callback(root.codigo)
